<!DOCTYPE html>
<html>
<head>
    <title>Board Test</title>
    <style>
        body { font-family: Arial; margin: 20px; }
        .board-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; max-width: 800px; }
        .mini-board { border: 2px solid #333; padding: 5px; }
        .mini-board h4 { margin: 0 0 5px 0; }
        .board-squares { display: grid; grid-template-columns: repeat(4, 40px); gap: 2px; }
        .square { width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; font-size: 24px; border: 1px solid #ccc; }
        .z0 { background: #ddd; }
        .z1 { background: #eee; }
        #summary { margin: 20px 0; padding: 10px; background: #f0f0f0; border-radius: 5px; }
    </style>
</head>
<body>
    <h1>4D Chess Board Test - White Pieces</h1>
    <div id="summary"></div>
    <h2>Layer Z=0 (Major Pieces)</h2>
    <div id="layer-z0" class="board-grid"></div>
    <h2>Layer Z=1 (Pawns)</h2>
    <div id="layer-z1" class="board-grid"></div>
    
    <script src="js/board.js"></script>
    <script src="js/pieces.js"></script>
    <script src="js/game.js"></script>
    <script>
        const game = new ChessGame();
        const whitePieces = game.board.getPiecesByColor('white');
        const blackPieces = game.board.getPiecesByColor('black');
        
        // Count by type
        const count = { white: {}, black: {} };
        whitePieces.forEach(p => count.white[p.type] = (count.white[p.type] || 0) + 1);
        blackPieces.forEach(p => count.black[p.type] = (count.black[p.type] || 0) + 1);
        
        // Display summary
        const summary = document.getElementById('summary');
        summary.innerHTML = `
            <h3>Piece Count Summary</h3>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                <div>
                    <strong>White pieces (${whitePieces.length} total):</strong><br>
                    King: ${count.white.king || 0}<br>
                    Queen: ${count.white.queen || 0}<br>
                    Rooks: ${count.white.rook || 0}<br>
                    Bishops: ${count.white.bishop || 0}<br>
                    Knights: ${count.white.knight || 0}<br>
                    Pawns: ${count.white.pawn || 0}
                </div>
                <div>
                    <strong>Black pieces (${blackPieces.length} total):</strong><br>
                    King: ${count.black.king || 0}<br>
                    Queen: ${count.black.queen || 0}<br>
                    Rooks: ${count.black.rook || 0}<br>
                    Bishops: ${count.black.bishop || 0}<br>
                    Knights: ${count.black.knight || 0}<br>
                    Pawns: ${count.black.pawn || 0}
                </div>
            </div>
            <div style="margin-top: 10px; font-weight: bold; color: ${whitePieces.length === 16 && blackPieces.length === 16 ? 'green' : 'red'}">
                ${whitePieces.length === 16 && blackPieces.length === 16 ? '✓ CORRECT: 16 pieces per side' : '✗ ERROR: Expected 16 pieces per side'}
            </div>
        `;
        
        const symbols = {
            white: { king: '♔', queen: '♕', rook: '♖', bishop: '♗', knight: '♘', pawn: '♙' },
            black: { king: '♚', queen: '♛', rook: '♜', bishop: '♝', knight: '♞', pawn: '♟' }
        };
        
        function renderLayer(z, containerId) {
            const container = document.getElementById(containerId);
            for (let w = 0; w < 4; w++) {
                for (let x = 0; x < 4; x++) {
                    const miniBoard = document.createElement('div');
                    miniBoard.className = 'mini-board';
                    miniBoard.innerHTML = `<h4>W${w}X${x}</h4>`;
                    
                    const squares = document.createElement('div');
                    squares.className = 'board-squares';
                    
                    for (let y = 0; y < 4; y++) {
                        const square = document.createElement('div');
                        square.className = `square z${z}`;
                        const piece = game.board.getSquare(w, x, y, z);
                        if (piece) {
                            square.textContent = symbols[piece.color][piece.type];
                            square.style.color = piece.color === 'white' ? '#333' : '#000';
                            square.style.fontWeight = 'bold';
                        }
                        squares.appendChild(square);
                    }
                    
                    miniBoard.appendChild(squares);
                    container.appendChild(miniBoard);
                }
            }
        }
        
        renderLayer(0, 'layer-z0');
        renderLayer(1, 'layer-z1');
    </script>
</body>
</html>
